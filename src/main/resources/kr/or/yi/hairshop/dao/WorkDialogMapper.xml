<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.yi.hairshop.dao.WorkDialogMapper">
	<resultMap type="WorkDialog" id="basicWorkDialog">
		<result property="wNo" column="w_no"/>
		<result property="wWorkTime" column="w_workTime" />
		<result property="wReservTime" column="w_reservTime" />
		<result property="wPriceTotal" column="w_priceTotal" />
	</resultMap>

	<resultMap type="WorkDialog" id="resultWorkDialog">
		<result property="wNo" column="w_no"/>
		<result property="wWorkTime" column="w_workTime" />
		<result property="wReservTime" column="w_reservTime" />
		<result property="wPriceTotal" column="w_priceTotal" />
		<association property="wDNo" resultMap="kr.or.yi.hairshop.dao.DesignerMapper.extendsDesigner"/>
		<association property="wEName" resultMap="kr.or.yi.hairshop.dao.EventMapper.basicEvent"/>
		<association property="wGNo" resultMap="kr.or.yi.hairshop.dao.GuestMapper.basicGuest" />
	</resultMap>
	
<!-- 	<resultMap type="" id="" extends="basicWorkDialog">
		<association property="wDNo" resultMap="kr.or.yi.hairshop.dao.DesignerMapper.extendsDesigner"/>
		<association property="wEName" resultMap="kr.or.yi.hairshop.dao.EventMapper.basicEvent"/>
		<association property="wGNo" resultMap="kr.or.yi.hairshop.dao.GuestMapper.basicGuest" />
	</resultMap> -->
	
<!-- 	<select id="selectWDGECPjoinAll" resultMap="">
		SELECT *
		FROM workdialog w
		left join designer d
		on w.w_d_no=d.d_no
		left join event e
		on w.w_e_name=e.e_name
		left join choice c
		on w.w_no=c.c_w_no
		left join product p
		on c.c_p_name=p.p_name
		left join guest g
		on w_g_no=g.g_no
	</select> -->
	<select id="selectDListByNo" parameterType="int" resultMap="resultWorkDialog">
		select
		w_no,
		w_workTime,
		w_reservTime,
		w_e_name,
		w_d_no,
		w_g_no,
		g.g_name
		from workdialog w
		join guest g
		on w.w_d_no=#{dNo} and w.w_g_no=g.g_no;
	</select>
	
	<select id="selectByAll" resultType="WorkDialog">
		select
		w_no,
		w_workTime,
		w_reservTime,
		w_e_name,
		w_d_no,
		w_g_no,
		c_w_no,
		c_p_name,
		g_no,
		g_l_grade,
		g_email,
		g_birth,
		g_name,
		g_tel,
		g_point,
		g_memo
		from workdialog w
		left join
		choice c
		on w.w_no=c.c_w_no
		left join guest g
		on w.w_g_no=g.g_no
	</select>

</mapper>