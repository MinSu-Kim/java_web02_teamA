<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.yi.hairshop.dao.GuestMapper">

	<resultMap type="Guest" id="extendsGuest"
		extends="basicGuest">
		<association property="gLGrade"
			resultMap="kr.or.yi.hairshop.dao.LevelMapper.basicLevel" />
		<collection property="workDialogList"
			resultMap="kr.or.yi.hairshop.dao.WorkDialogMapper.basicWorkDialog" />
	</resultMap>

	<resultMap type="Guest" id="basicGuest">
		<result property="gNo" column="g_no" />
		<result property="gId" column="g_id" />
		<result property="gPassword" column="g_password" />
		<result property="gName" column="g_name" />
		<result property="gTel" column="g_tel" />
		<result property="gEmail" column="g_email" />
		<result property="gBirth" column="g_birth" />
		<result property="gJoin" column="g_join" />
		<result property="gPoint" column="g_point" />
		<result property="gMemo" column="g_memo" />
	</resultMap>


	<select id="selectGuestByAll" resultType="Guest"
		resultMap="extendsGuest">
		select g_no, g_l_grade as gLGrade, g_name, g_tel, g_email,
		g_birth, g_join, g_point, g_memo
		from
		hairshop.guest;
	</select>

	<insert id="insertGuest" parameterType="Guest">
		insert into
		hairshop.guest
		(g_l_grade, g_name, g_tel, g_email, g_birth, g_join,
		g_point, g_memo)
		values(#{gLGrade.lGrade}, #{gName}, #{gTel},
		#{gEmail}, #{gBirth}, #{gJoin}, 0, #{gMemo});
	</insert>

	<update id="updateGuest">
		UPDATE hairshop.guest
		SET g_id=#{gId}, g_password=#{gPassword}, g_l_grade=#{gLGrade.lGrade}, g_name=#{gName}, g_tel=#{gTel},
		g_email=#{gEmail}, g_birth=#{gBirth}, g_join=#{gJoin}, g_point=#{gPoint}, g_memo=#{gMemo}
		WHERE g_no=#{gNo};
	</update>

	<delete id="deleteGuest">
		DELETE FROM hairshop.guest
		WHERE g_no=#{gNo};
	</delete>
</mapper>